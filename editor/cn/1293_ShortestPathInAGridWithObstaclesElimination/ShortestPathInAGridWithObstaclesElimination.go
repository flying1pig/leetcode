package main

/**
ç»™ä½ ä¸€ä¸ª m * n çš„ç½‘æ ¼ï¼Œå…¶ä¸­æ¯ä¸ªå•å…ƒæ ¼ä¸æ˜¯ 0ï¼ˆç©ºï¼‰å°±æ˜¯ 1ï¼ˆéšœç¢ç‰©ï¼‰ã€‚æ¯ä¸€æ­¥ï¼Œæ‚¨éƒ½å¯ä»¥åœ¨ç©ºç™½å•å…ƒæ ¼ä¸­ä¸Šã€ä¸‹ã€å·¦ã€å³ç§»åŠ¨ã€‚

 å¦‚æœæ‚¨ æœ€å¤š å¯ä»¥æ¶ˆé™¤ k ä¸ªéšœç¢ç‰©ï¼Œè¯·æ‰¾å‡ºä»å·¦ä¸Šè§’ (0, 0) åˆ°å³ä¸‹è§’ (m-1, n-1) çš„æœ€çŸ­è·¯å¾„ï¼Œå¹¶è¿”å›é€šè¿‡è¯¥è·¯å¾„æ‰€éœ€çš„æ­¥æ•°ã€‚å¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„è·¯
å¾„ï¼Œåˆ™è¿”å› -1 ã€‚



 ç¤ºä¾‹ 1ï¼š




è¾“å…¥ï¼š grid = [[0,0,0],[1,1,0],[0,0,0],[0,1,1],[0,0,0]], k = 1
è¾“å‡ºï¼š6
è§£é‡Šï¼š
ä¸æ¶ˆé™¤ä»»ä½•éšœç¢çš„æœ€çŸ­è·¯å¾„æ˜¯ 10ã€‚
æ¶ˆé™¤ä½ç½® (3,2) å¤„çš„éšœç¢åï¼Œæœ€çŸ­è·¯å¾„æ˜¯ 6 ã€‚è¯¥è·¯å¾„æ˜¯ (0,0) -> (0,1) -> (0,2) -> (1,2) -> (2,2) -> (3,2
) -> (4,2).


 ç¤ºä¾‹ 2ï¼š




è¾“å…¥ï¼šgrid = [[0,1,1],[1,1,1],[1,0,0]], k = 1
è¾“å‡ºï¼š-1
è§£é‡Šï¼šæˆ‘ä»¬è‡³å°‘éœ€è¦æ¶ˆé™¤ä¸¤ä¸ªéšœç¢æ‰èƒ½æ‰¾åˆ°è¿™æ ·çš„è·¯å¾„ã€‚




 æç¤ºï¼š


 grid.length == m
 grid[0].length == n
 1 <= m, n <= 40
 1 <= k <= m*n
 grid[i][j] æ˜¯ 0 æˆ– 1
 grid[0][0] == grid[m-1][n-1] == 0


 Related Topics å¹¿åº¦ä¼˜å…ˆæœç´¢ æ•°ç»„ çŸ©é˜µ ğŸ‘ 291 ğŸ‘ 0

*/

/*
é¢˜å‹: ç½‘æ ¼bfs
é¢˜ç›®: ç½‘æ ¼ä¸­çš„æœ€çŸ­è·¯å¾„
*/

// leetcode submit region begin(Prohibit modification and deletion)
func shortestPath(grid [][]int, k int) int {
	res := 0
	m, n := len(grid), len(grid[0])
	if m == 1 && n == 1 {
		return 0
	}
	// å››ä¸ªæ–¹å‘
	dirs := [][]int{{0, 1}, {0, -1}, {1, 0}, {-1, 0}}
	// å®šä¹‰visæ•°ç»„ï¼Œè®°å½•è®¿é—®è¿‡çš„æ•°å­—ï¼Œåˆå§‹åŒ–ç½®-1ä»£è¡¨æœªè®¿é—®
	// visæ•°ç»„åœ¨BFSæ—¶è¿˜æœ‰å¦å¤–ä¸€å±‚å«ä¹‰ï¼Œå³å½“å‰è¯¥ä½ç½®å‰©ä½™æ­¥æ•°ï¼Œåˆå§‹åŒ–[0ï¼Œ 0]ä½ç½®å³ä¸ºk
	vis := make([][]int, m)
	for i := 0; i < m; i++ {
		vis[i] = make([]int, n)
	}
	for i := 0; i < m; i++ {
		for j := 0; j < n; j++ {
			vis[i][j] = -1
		}
	}
	vis[0][0] = k
	queue := [][]int{}
	queue = append(queue, []int{0, 0})
	for len(queue) != 0 {
		length := len(queue)
		for i := 0; i < length; i++ {
			temp := queue[0]
			queue = queue[1:]
			for _, dir := range dirs {
				x := temp[0] + dir[0]
				y := temp[1] + dir[1]
				// åˆ¤æ–­å½“å‰ä½ç½®çš„åˆæ³•æ€§ï¼Œå¦‚æœå½“å‰ä½ç½®æœªè®¿é—®ï¼Œæˆ–è€…ç›¸æ¯”ä¹‹å‰å…¶ä»–ä½ç½®è®¿é—®è¯¥ä½ç½®æ—¶å‰©ä½™æ­¥æ•°æ›´å¤šï¼Œåˆ™è¿›å…¥
				if x >= 0 && x < m && y >= 0 && y < n && (vis[x][y] == -1 || vis[temp[0]][temp[1]]-grid[x][y] > vis[x][y]) {
					// åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦è¿˜æœ‰è¶³å¤Ÿçš„æ­¥æ•°è¿›å…¥ï¼Œå¦‚æœå½“å‰ä½ç½®ä¸º0ï¼Œåˆ™ä¸€å®šå¯ä»¥è¿›å…¥ï¼Œå¦‚æœå½“å‰ä½ç½®ä¸ºï¼Œåˆ™è‡³å°‘è¿˜éœ€è¦ä¸€æ­¥æ‰èƒ½è¿›å…¥
					if grid[x][y] == 0 || grid[x][y] == 1 && vis[temp[0]][temp[1]] > 0 {
						if x == m-1 && y == n-1 {
							return res + 1
						}
						queue = append(queue, []int{x, y})
						// èµ°åˆ°å½“å‰ä½ç½®åï¼Œå½“å‰ä½ç½®å‰©ä½™çš„æ­¥æ•°åˆ¤æ–­
						if grid[x][y] == 1 {
							vis[x][y] = vis[temp[0]][temp[1]] - 1
						} else {
							vis[x][y] = vis[temp[0]][temp[1]]
						}
					}
				}
			}
		}
		res++
	}
	return -1
}

//leetcode submit region end(Prohibit modification and deletion)

func main() {

}
